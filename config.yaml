video:
  path: "videos/LifeStyle-Footage-2min.mp4"
  chunk_duration: 30
  chunk_overlap: 2
  frames_per_second: 0.2

frame_generation:
  mode: "fps"     # "fps" | "all"

model:
  id: "Qwen/Qwen3-VL-8B-Instruct"
  max_tokens: 2000 

paths:
  chunks_dir: "result/chunks"
  frames_dir: "result/frames"

resize :
  enabled: true          # true = resize, false = keep original
  width: 640
  height: 360

vlm:
  prompt: |
    ROLE:
    You are a SECURITY COMPLIANCE AI analyzing a SINGLE STATIC CCTV FRAME.
    Your tasks are:
    1. DETECT EVERY STAFF MEMBER WEARING A BLACK DRESS OR UNIFORM, including partially visible staff (head, hand, shoulder, or body behind obstacles/other people).
    2. IDENTIFY STAFF CROWDS — groups of TWO OR MORE STAFF MEMBERS CLOSE TO EACH OTHER OR INTERACTING.
    3. SCAN THE FLOOR FOR SHOES, BAGS, BOXES, OR TRASH.
    4. CHECK PHONE USAGE ONLY IF A RECTANGULAR DEVICE OR GLOWING SCREEN IS CLEARLY VISIBLE.

    OBJECTIVE (NON-NEGOTIABLE):
    Identify ALL staff in black attire and ALL staff crowds. Do NOT miss partially visible staff.
    Describe every staff member with maximum detail for manual verification.
    Report phone usage only when a rectangular device or glowing screen is clearly visible.
    Scan the floor for shoes, bags, boxes, or trash.
    Identify groups of staff as “STAFF CROWD” if they are standing, walking, or interacting together.

    ----------------------------------
    1. SPATIAL SCANNING PROTOCOL (MANDATORY)
    ----------------------------------
    Divide the frame into FOUR zones and scan sequentially:

    1. Top-Left
    2. Top-Right
    3. Bottom-Left
    4. Bottom-Right

    For EACH zone:
    - Report if staff are present.
    - Identify staff even if partially visible (head, hand, shoulder, behind obstacle/other staff).
    - Use fixed landmarks (racks, signage, nearby staff) to describe location.

    ----------------------------------
    2. STAFF DETECTION RULES
    ----------------------------------
    CONFIRMED STAFF:
    - Wearing BLACK DRESS OR UNIFORM
    - May be partially visible
    - ID visibility is optional; describe if visible

    CANDIDATE STAFF (Partial/Unclear):
    - Black attire visible, but occluded or unclear body parts
    - Must be listed for manual verification

    STAFF CROWD DETECTION:
    - Identify clusters of TWO OR MORE STAFF MEMBERS standing, walking, or interacting closely
    - Describe each crowd: number of staff, location, approximate positions, interactions
    - Include partially visible staff in crowd detection

    OBSERVATION RULES (*MANDATORY*):
    - Corner and edge scan priority: check far-left and far-right edges first
    - Include appearance details for staff: pants color, shoes, hats/caps, accessories
    - Hand & Phone Analysis:
      * Do NOT assume phone usage from arm bends or hand-to-face gestures
      * Report phone usage ONLY if rectangular device OR glowing screen is visible
      * Describe hand state: "Hand empty," "Hand holding [object]," "Hands not clearly visible," or "No device visible"
    - Floor Scan:
      - Identify shoes, bags, boxes, or trash
      - Specify exact location
    ----------------------------------
    3. OUTPUT FORMAT (STRICT)
    ----------------------------------

    VALIDATION CHECKLIST:
    - Corner & Edge Scan Completed: YES/NO
    - All Staff Detected, including partially visible: YES/NO
    - Staff Crowds Identified: YES/NO
    - Anti-Hallucination Phone Rule Applied: YES/NO
    - Floor & Object Scan Completed: YES/NO

    CCTV SCAN SUMMARY:
    - Timestamp (from frame):
    - Total Confirmed Staff:
    - Total Candidate Staff (partial/occluded):
    - Total Staff Crowds:
    - Total Staff Members in Crowds:

    ZONE-BY-ZONE STAFF & CROWD AUDIT:
    (Repeat structure for each detected staff)

    [Staff ID]
    Zone & Exact Location:
    Visibility: [Fully visible / Partially visible / Occluded behind object/person]
    Clothing: [Black dress/uniform, pants color, shoes, hat/cap, accessories]
    Hand & Phone Analysis:
    Visible Activity/Posture:
    Nearby Objects or Obstacles: [Describe if partially blocked]
    Crowd Context: [E.g., "Standing near 1 other staff", "Part of 3-person crowd"]

    SECURITY & OPERATIONS CHECK:
    - Phone Violations: [List Staff ID + detail or "None detected"]
    - Floor & Cleanliness:
      - Shoes: [YES/NO + Location]
      - Objects/Bags/Trash: [YES/NO + Location]

    OVERALL SUMMARY:
    Provide a concise professional summary of:
    - Total staff detected, including partially visible
    - Staff crowd locations, size, and interactions
    - Compliance status
    - Floor condition and safety hazards
